# test-mermaid

````mermaid
sequenceDiagram
    par ONBOARD LEAD
        activate CAPTAIN API GATEWAY
        CAPTAIN API GATEWAY->>LEAD MANAGEMENT SERVICE: ONBOARD LEAD CAPTAIN
        deactivate CAPTAIN API GATEWAY
        activate LEAD MANAGEMENT SERVICE
        LEAD MANAGEMENT SERVICE->>LEAD MANAGEMENT SERVICE:CREATE CAPTAIN
        LEAD MANAGEMENT SERVICE->>SUPPLY REGISTRY SERVICE: PUBLISH CAPTAIN_LEAD_APPROVED_FOR_CREATION_ON_CORE_VIA_SRS_EVENT
        activate SUPPLY REGISTRY SERVICE
        deactivate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE DRIVER
        activate CASH IN SERVICE
        SUPPLY REGISTRY SERVICE->>CASH IN SERVICE: PUBLISH CAPTAIN_UPDATE EVENT
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH CAPTAIN_PROFILE_UPDATE EVENT
        deactivate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>CASH IN SERVICE: PUBLISH CAPTAIN_INFO_ATTRIBUTES EVENT
        deactivate CASH IN SERVICE
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SEND CAPTAIN CREATION SMS
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE CAPTAIN DOCUMENTS
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH CAPTAIN_CREATION_RESPONSE EVENT
        LEAD MANAGEMENT SERVICE->>SUPPLY REGISTRY SERVICE: PUBLISH CAR_LEAD_APPROVED_FOR_CREATION_ON_CORE EVENT
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE CAR
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH CAR_CREATION_RESPONSE EVENT
        LEAD MANAGEMENT SERVICE->>SUPPLY REGISTRY SERVICE: PUBLISH PUBLISH LIMO_LEAD_APPROVED_FOR_CREATION_ON_CORE EVENT
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: CREATE AND ASSIGN LIMO COMPANY
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH LIMO_CREATION_RESPONSE EVENT
        deactivate LEAD MANAGEMENT SERVICE
        deactivate SUPPLY REGISTRY SERVICE
    end
    par ADD CAPTAIN
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: ADD CAPTAIN
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE CAPTAIN
        activate CASH IN SERVICE
        SUPPLY REGISTRY SERVICE->>CASH IN SERVICE: PUBLISH CAPTAIN_UPDATE EVENT
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH CAPTAIN_PROFILE_UPDATE EVENT
        deactivate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>CASH IN SERVICE: PUBLISH CAPTAIN_INFO_ATTRIBUTES EVENT
        deactivate CASH IN SERVICE
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE DOCUMENTS
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE CAR
        SUPPLY REGISTRY SERVICE->CAPTAIN API GATEWAY: SUCCESS
        deactivate SUPPLY REGISTRY SERVICE
        deactivate CAPTAIN API GATEWAY
    end
    par ACTIVATE CAPTAIN
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: ACTIVATE CAPTAIN
        SUPPLY REGISTRY SERVICE->>CAPTAIN API GATEWAY: SUCCESS
        deactivate SUPPLY REGISTRY SERVICE
        deactivate CAPTAIN API GATEWAY
    end
    par CAPTAIN DETAILS
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: GET CAPTAIN DETAILS
        SUPPLY REGISTRY SERVICE->>CAPTAIN API GATEWAY: SUCCESS
        deactivate SUPPLY REGISTRY SERVICE
        deactivate CAPTAIN API GATEWAY
    end
    par EDIT CAPTAIN
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: EDIT CAPTAIN
        activate CASH IN SERVICE
        SUPPLY REGISTRY SERVICE->>CASH IN SERVICE: PUBLISH CAPTAIN_INFO_ATTRIBUTES
        deactivate CASH IN SERVICE
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: UPDATE DRIVER
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: UPDATE DRIVER DETAILS
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: UPDATE DRIVER PHONE
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: VERIFY DOCUMENTS
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE DOCUMENTS
        SUPPLY REGISTRY SERVICE->CAPTAIN API GATEWAY: SUCCESS
        deactivate CAPTAIN API GATEWAY
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH CAPTAIN_UPDATE EVENT
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH CAPTAIN_PROFILE_UPDATE EVENT
        deactivate LEAD MANAGEMENT SERVICE
        deactivate SUPPLY REGISTRY SERVICE
    end
    par ADD LIMO COMPANY
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: ADD LIMO COMPANY
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE ADDRESS
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE LIMO COMPANY
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: SAVE LIMO COMPANY DETAILS
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: ASSIGN LIMO COMPANY TO SERVICE PROVIDER
        SUPPLY REGISTRY SERVICE->CAPTAIN API GATEWAY: SUCCESS
        deactivate CAPTAIN API GATEWAY
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH LIMO_COMPANY_IN_SG EVENT
        deactivate SUPPLY REGISTRY SERVICE
        LEAD MANAGEMENT SERVICE->>LEAD MANAGEMENT SERVICE: UPDATE LIMO COMPANY
        deactivate LEAD MANAGEMENT SERVICE
    end
    par EDIT LIMO COMPANY
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: EDIT LIMO COMPANY
        SUPPLY REGISTRY SERVICE->>SUPPLY REGISTRY SERVICE: UPDATE LIMO COMPANY DETAILS
        SUPPLY REGISTRY SERVICE->CAPTAIN API GATEWAY: SUCCESS
        deactivate CAPTAIN API GATEWAY
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH SYNC_LIMO_COMPANY_IN_SG EVENT
        LEAD MANAGEMENT SERVICE->>LEAD MANAGEMENT SERVICE: UPDATE LIMO COMPANY
        deactivate LEAD MANAGEMENT SERVICE
        activate CAPTAIN-EARNING WORKER
        SUPPLY REGISTRY SERVICE->>CAPTAIN-EARNING WORKER: PUBLISH LIMO_COMPANY_EDITED EVENT
        deactivate CAPTAIN-EARNING WORKER
        deactivate SUPPLY REGISTRY SERVICE
    end
    par ADD CAR
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: ADD CAR
        SUPPLY REGISTRY SERVICE->CAPTAIN API GATEWAY: SUCCESS
        deactivate CAPTAIN API GATEWAY
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH UPSERT_CAR EVENT
        deactivate LEAD MANAGEMENT SERVICE
        deactivate SUPPLY REGISTRY SERVICE
    end
    par EDIT CAR
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: EDIT CAR
        SUPPLY REGISTRY SERVICE->SUPPLY REGISTRY SERVICE: ASSIGN DRIVER CAR TYPE
        SUPPLY REGISTRY SERVICE->SUPPLY REGISTRY SERVICE: ASSIGN DEDICATED DRIVER FOR CAR
        SUPPLY REGISTRY SERVICE->CAPTAIN API GATEWAY: SUCCESS
        deactivate CAPTAIN API GATEWAY
        activate LEAD MANAGEMENT SERVICE
        SUPPLY REGISTRY SERVICE->>LEAD MANAGEMENT SERVICE: PUBLISH UPSERT_CAR EVENT
        deactivate LEAD MANAGEMENT SERVICE
        deactivate SUPPLY REGISTRY SERVICE
    end
    par ADD CAR MAKE
        activate CAPTAIN API GATEWAY
        activate SUPPLY REGISTRY SERVICE
        CAPTAIN API GATEWAY->>SUPPLY REGISTRY SERVICE: ADD CAR MAKE
        SUPPLY REGISTRY SERVICE->SUPPLY REGISTRY SERVICE: SAVE CAR MAKE
        SUPPLY REGISTRY SERVICE->>CAPTAIN API GATEWAY: SUCCESS
        deactivate SUPPLY REGISTRY SERVICE
        deactivate CAPTAIN API GATEWAY
    end
````